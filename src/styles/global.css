@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --ctp-rosewater: #f5e0dc;
    --ctp-flamingo: #f2cdcd;
    --ctp-pink: #f5c2e7;
    --ctp-mauve: #cba6f7;
    --ctp-red: #f38ba8;
    --ctp-maroon: #eba0ac;
    --ctp-peach: #fab387;
    --ctp-yellow: #f9e2af;
    --ctp-green: #a6e3a1;
    --ctp-teal: #94e2d5;
    --ctp-sky: #89dceb;
    --ctp-sapphire: #74c7ec;
    --ctp-blue: #89b4fa;
    --ctp-lavender: #b4befe;
    --ctp-text: #cdd6f4;
    --ctp-subtext1: #bac2de;
    --ctp-subtext0: #a6adc8;
    --ctp-overlay2: #9399b2;
    --ctp-overlay1: #7f849c;
    --ctp-overlay0: #6c7086;
    --ctp-surface2: #585b70;
    --ctp-surface1: #45475a;
    --ctp-surface0: #313244;
    --ctp-base: #1e1e2e;
    --ctp-mantle: #181825;
    --ctp-crust: #11111b;

    --bg-color: var(--ctp-base);
    --text-color: var(--ctp-text);
    --dim-text: var(--ctp-subtext0);
    --highlight: var(--ctp-mauve);
    --alert: var(--ctp-red);
    --success: var(--ctp-green);
    --link-color: var(--ctp-blue);
    
    --font-stack: 'JetBrains Mono', 'Fira Code', 'Courier New', Courier, monospace;
  }

  body {
    @apply bg-ctp-base text-ctp-text font-mono leading-relaxed overflow-x-hidden m-0 p-0;
  }

  a {
    @apply text-ctp-blue no-underline border-b border-dashed border-ctp-subtext0 transition-all duration-200 hover:text-ctp-mauve hover:border-ctp-mauve;
  }

  h1, h2, h3 {
    @apply font-bold tracking-wider text-ctp-mauve;
  }

  h1 {
    @apply text-4xl mb-4;
  }

  /* Custom Scrollbar */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    @apply bg-ctp-crust;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-ctp-surface1 rounded-full;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-ctp-surface2;
  }

  /* For Firefox */
  * {
    scrollbar-width: thin;
    scrollbar-color: #45475a #11111b;
  }

  /* CRT Scanline Effect */
  body.crt-active::before {
    content: " ";
    @apply block fixed inset-0 z-10 pointer-events-none;
    background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), 
                linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
    background-size: 100% 2px, 3px 100%;
  }

  blockquote:not(.admonition) {
    @apply border-l-4 border-ctp-surface2 bg-ctp-surface0 px-5 py-2 my-5 text-ctp-subtext1 italic rounded-r;
  }

  blockquote:not(.admonition) p {
    @apply mb-0;
  }

  code {
    @apply bg-ctp-surface0 text-ctp-pink px-1.5 py-0.5 rounded text-[0.9em] font-mono;
  }

  pre code {
    @apply bg-transparent p-0 rounded-none text-inherit;
  }
}

@layer components {
  .section {
    @apply mb-10 py-2.5 border-t border-ctp-surface0;
  }

  .section-header {
    @apply bg-transparent text-ctp-pink p-0 inline-block mb-4 font-bold text-lg;
  }

  .prompt {
    @apply text-ctp-subtext0 mb-5 p-2.5 bg-ctp-mantle rounded text-sm;
  }

  .cursor {
    @apply inline-block w-2 h-[1.2em] bg-ctp-text align-bottom animate-blink;
  }

  .skills-grid {
    @apply grid gap-5 grid-cols-[repeat(auto-fit,minmax(200px,1fr))];
  }

  .skill-item {
    @apply border-l-2 border-ctp-surface1 pl-4 transition-colors duration-200 hover:border-ctp-mauve;
  }

  .skill-item strong {
    @apply text-ctp-lavender block mb-1;
  }

  .skill-item span {
    @apply text-ctp-subtext0 text-[0.85em] block;
  }

  .project-card {
    @apply mb-[30px] pb-5;
  }

  .project-card h3 {
    @apply text-ctp-blue text-xl mb-2.5;
  }

  .tag {
    @apply bg-ctp-surface0 text-ctp-text px-2 py-0.5 text-[0.75em] rounded mr-2 border-none;
  }

  .malware-report-btn {
    @apply inline-block mt-4 border border-ctp-red text-ctp-red px-4 py-2 font-bold rounded text-sm transition-colors duration-200 hover:bg-ctp-red hover:text-ctp-base;
  }

  .footer {
    @apply text-center mt-[60px] pt-5 border-t border-ctp-surface0 text-ctp-subtext0 text-sm;
  }

  .typewriter h1 {
    @apply overflow-hidden border-r-[.15em] border-ctp-mauve whitespace-nowrap mx-auto tracking-[.15em] animate-typing;
  }

  @media (max-width: 600px) {
    .typewriter h1 {
      @apply whitespace-normal border-none animate-none;
    }
  }

  /* Admonitions */
  .admonition {
    @apply my-5 p-0 rounded-md border-l-4 bg-ctp-mantle shadow-md overflow-hidden;
  }

  .admonition-title {
    @apply px-4 py-2 font-bold uppercase text-[0.85em] tracking-wider flex items-center gap-2;
    background: rgba(var(--admonition-color-rgb), 0.1);
    color: var(--admonition-color);
  }

  .admonition-content {
    @apply px-4 pt-1.5 pb-2.5 text-ctp-text;
  }

  .admonition-content p:first-child { @apply mt-0; }
  .admonition-content p:last-child { @apply mb-0; }

  .admonition-note { --admonition-color: #89b4fa; border-left-color: #89b4fa; }
  .admonition-tip { --admonition-color: #a6e3a1; border-left-color: #a6e3a1; }
  .admonition-important { --admonition-color: #cba6f7; border-left-color: #cba6f7; }
  .admonition-warning { --admonition-color: #f9e2af; border-left-color: #f9e2af; }
  .admonition-caution { --admonition-color: #f38ba8; border-left-color: #f38ba8; }

  /* Code Blocks */
  .code-wrapper {
    @apply my-5 border border-ctp-surface0 rounded-md bg-ctp-mantle shadow-lg overflow-hidden relative;
  }

  .code-header {
    @apply flex justify-between items-center bg-ctp-surface0 px-3 py-1.5 border-b border-ctp-base font-mono text-[0.75em] text-ctp-subtext0;
  }

  .copy-btn {
    @apply bg-transparent border border-ctp-surface1 text-ctp-subtext0 px-2 py-0.5 rounded cursor-pointer text-[0.85em] transition-all duration-200 hover:bg-ctp-surface1 hover:text-ctp-text;
  }

  .code-content {
    @apply flex overflow-x-auto;
  }

  .line-numbers {
    @apply flex-shrink-0 py-4 px-2.5 text-right bg-ctp-base text-ctp-overlay0 border-r border-ctp-surface0 select-none font-mono text-[0.9em] leading-relaxed;
  }

  .code-content pre {
    @apply !m-0 !p-4 grow !bg-transparent !border-none !overflow-visible;
  }

  .code-content pre code {
    @apply font-mono text-[0.9em] leading-relaxed block bg-transparent p-0 rounded-none text-inherit;
  }

  .command-prompt {
    @apply text-ctp-mauve select-none mr-1 font-bold;
  }

  .line-command {
    @apply text-ctp-text;
  }

  .line-output {
    @apply opacity-65;
  }

  .prose img {
    @apply block mx-auto my-[30px] max-w-full h-auto rounded border border-ctp-surface0;
  }

  .prose .caption {
    @apply block text-center text-[0.9em] text-ctp-subtext0 -mt-4 mb-[30px];
  }
}

@keyframes blink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0; }
}

@keyframes typing {
  from { width: 0 }
  to { width: 100% }
}

.animate-blink {
  animation: blink 1s step-end infinite;
}

.animate-typing {
  animation: typing 2.5s steps(30, end), blink-caret .75s step-end infinite;
}

@keyframes blink-caret {
  from, to { border-color: transparent }
  50% { border-color: #cba6f7; }
}
